{% extends "views/model/layout.html.jinja" %}

{% block content %}
  <div class="level">
    <div class="level-left"></div>
    <div class="level-right">
      {% if view.list_query_fields %}
        <form action method="GET">
          <input
            class="input"
            type="text"
            placeholder="Filter by {{ view.list_query_fields | join(', ') }}"
            name="query"
            value="{{ query or '' }}"
          />
        </form>
      {% endif %}
    </div>
  </div>
  <table class="is-fullwidth is-hoverable is-bordered table">
    <thead>
      <tr>
        {% for field in view.list_fields %}
          <th>
            {% if field in view.list_sortable_fields %}
              <a class="" href="{{ sorting.get_sorting_route(field) }}">
                {{ view.field_labels[field] or field }}
                {% if sorting.fields[field] %}
                  {% if sorting.fields[field] == "ASC" %}
                    ⬇️
                  {% else %}
                    ⬆️
                  {% endif %}
                {% endif %}
              </a>
            {% else %}
              {{ view.field_labels[field] or field }}
            {% endif %}
          </th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
        <tr>
          {% for field in view.list_fields %}
            <td>
              {% if loop.first %}
                <a
                  href="{{ request.url_for(view.edit.name, id=view.model_id_getter(item)) }}"
                  >{{ item[field] }}</a
                >
              {% else %}
                {{ item[field] }}
              {% endif %}
            </td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="level">
    <div class="level-left">
      <div class="level-item">
        Showing&nbsp;
        <span class="has-text-weight-semibold">{{ pagination.range[0] }}</span>
        &nbsp;to&nbsp;
        <span class="has-text-weight-semibold">{{ pagination.range[1] }}</span>
        &nbsp;of&nbsp;
        <span class="has-text-weight-semibold">{{ pagination.total }}</span>
        &nbsp;entries
      </div>
    </div>
    <div class="level-right">
      <div class="level-item">
        <div class="buttons">
          <a
            class="button"
            href="{{ pagination.previous_route or '' }}"
            {{ 'disabled' if not pagination.previous_route else '' }}
            >Previous</a
          >
          <a
            class="button"
            href="{{ pagination.next_route or '' }}"
            {{ 'disabled' if not pagination.next_route else '' }}
            >Next</a
          >
        </div>
      </div>
    </div>
  </div>
{% endblock %}
